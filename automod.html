<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<title>NovaTime ‚Äî Automod</title>

<link rel="stylesheet" href="assets/styles.css">
<link rel="stylesheet" href="assets/sidebar.css">

<style>
/* ====== –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç–∏–ª–∏ Automod (—á–∞—Å—Ç—å –∏–∑ —Ç–≤–æ–µ–≥–æ —Å—É–ø–µ—Ä-UI) ====== */

.card {
    max-width: 950px;
    background: rgba(13,16,24,0.96);
    border-radius: 20px;
    padding: 26px 30px 30px 30px;
    box-shadow: 0 22px 60px rgba(0,0,0,0.75);
    border: 1px solid rgba(60,66,87,0.7);
    margin-bottom: 30px;
}

/* –∑–∞–≥–æ–ª–æ–≤–∫–∏ */
.section-title {
    font-size: 24px;
    color: #73b3ff;
    margin-bottom: 18px;
    margin-top: 0;
}

/* —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ */
textarea {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: 2px solid #2c313a;
    background: #111317;
    color: #cfd4da;
    resize: vertical;
    font-size: 15px;
}

/* —á–µ–∫–±–æ–∫—Å—ã Discord —Å—Ç–∏–ª—è */
.checkbox-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 8px 0;
}

.checkbox-wrapper input[type="checkbox"] {
    appearance: none;
    width: 22px;
    height: 22px;
    border-radius: 6px;
    border: 2px solid #5865F2;
    background: transparent;
    cursor: pointer;
    position: relative;
    transition: 0.18s;
}

.checkbox-wrapper input[type="checkbox"]:hover {
    box-shadow: 0 0 8px rgba(88,101,242,0.7);
}

.checkbox-wrapper input[type="checkbox"]:checked {
    background: #5865F2;
    box-shadow: 0 0 10px rgba(88,101,242,0.9);
}

.checkbox-wrapper input[type="checkbox"]:checked::after {
    content: "‚úî";
    position: absolute;
    color: white;
    font-size: 16px;
    left: 3.5px;
    top: -1px;
}

/* –±–ª–æ–∫ –ø—Ä–∞–≤–∏–ª */
.rule-item {
    background: #111317;
    border-radius: 12px;
    margin-bottom: 10px;
    border: 1px solid #252b36;
    overflow: hidden;
    transition: 0.18s;
}

.rule-item.active {
    border-color: #5865F2;
    box-shadow: 0 0 18px rgba(88,101,242,0.5);
}

.rule-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 14px;
    cursor: pointer;
}

.rule-left {
    display: flex;
    align-items: center;
    gap: 10px;
}

.rule-icon {
    width: 26px;
    height: 26px;
    border-radius: 6px;
    background: radial-gradient(circle at top left, #7dd3fc, #4c51bf);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 17px;
}

.rule-body {
    max-height: 0;
    overflow: hidden;
    padding: 0 14px;
    font-size: 14px;
    color: #9ca3af;
    transition: max-height 0.22s ease-out, padding-bottom 0.18s;
}

.rule-item.expanded .rule-body {
    max-height: 120px;
    padding-bottom: 10px;
}

.rule-item.expanded .rule-toggle-arrow {
    transform: rotate(90deg);
    color: #e5efff;
}

.rule-toggle-arrow {
    font-size: 18px;
    color: #9ca3af;
    transition: 0.18s;
}

.rule-item.active .rule-toggle-arrow {
    transform: rotate(90deg);
    color: #e5efff;
}
</style>

</head>

<body>

<!-- =============== SIDEBAR =============== -->
<div class="sidebar">
    <div class="sidebar-header">NovaTime</div>

    <div class="sidebar-menu">
        <a class="sidebar-item" href="index.html">üè† Dashboard</a>
        <a class="sidebar-item active" href="automod.html">üõ°Ô∏è Automod</a>
        <a class="sidebar-item" href="rules.html">üìú Rules</a>
        <a class="sidebar-item" href="logs.html">üìÅ Logs</a>
        <a class="sidebar-item" href="settings.html">‚öôÔ∏è Settings</a>
    </div>
</div>

<!-- =============== MAIN CONTENT =============== -->
<div class="main">
    <h1 class="page-title">–ê–≤—Ç–æ–º–æ–¥–µ—Ä–∞—Ü–∏—è</h1>
    <p class="page-note">–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ ‚Äî localStorage.</p>

    <!-- –ë–ª–æ–∫ 1: –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–æ–¥–∞ -->
    <div class="card">
        <h2 class="section-title">–ê–≤—Ç–æ–º–æ–¥–µ—Ä–∞—Ç–æ—Ä</h2>
        <div class="checkbox-wrapper">
            <input type="checkbox" id="automod-toggle">
            <label for="automod-toggle">–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–æ–¥–µ—Ä–∞—Ü–∏—é</label>
        </div>
    </div>

    <!-- –ë–ª–æ–∫ 2: –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ -->
    <div class="card">
        <h2 class="section-title">–ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞</h2>
        <textarea id="banned-words" rows="4"></textarea>
    </div>

    <!-- –ë–ª–æ–∫ 3: –ø—Ä–∞–≤–∏–ª–∞ -->
    <div class="card">
        <h2 class="section-title">–ü—Ä–∞–≤–∏–ª–∞ (R1‚ÄìR10)</h2>

        <div id="rules-list"></div>
    </div>

</div>

<!-- =============== SCRIPT =============== -->
<script>
// –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª
const RULES = {
    R1: { icon: "üóØÔ∏è", name: "–ú–∞—Ç / –∂–µ—Å—Ç–∫–∏–µ —Ä—É–≥–∞—Ç–µ–ª—å—Å—Ç–≤–∞" },
    R2: { icon: "üì¢", name: "–†–µ–∫–ª–∞–º–∞ / —Å—Å—ã–ª–∫–∏" },
    R3: { icon: "üò°", name: "–û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è" },
    R4: { icon: "üîû", name: "NSFW / –Ω–µ–ø—Ä–∏—Å—Ç–æ–π–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç" },
    R5: { icon: "‚öñÔ∏è", name: "–ü–æ–ª–∏—Ç–∏–∫–∞ / —Ä–µ–ª–∏–≥–∏—è / –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã" },
    R6: { icon: "üì®", name: "–§–ª—É–¥ / —Å–ø–∞–º / –∫–∞–ø—Å" },
    R7: { icon: "üîî", name: "–£–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ä–æ–ª–µ–π –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã" },
    R8: { icon: "‚ò£Ô∏è", name: "–§–∏—à–∏–Ω–≥ / –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–µ —Å—Å—ã–ª–∫–∏" },
    R9: { icon: "üîê", name: "–ü—É–±–ª–∏–∫–∞—Ü–∏—è –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö" },
    R10:{ icon: "üí£", name: "–ü–æ–ø—ã—Ç–∫–∞ –≤–∑–ª–æ–º–∞ / —Ç–æ–∫–µ–Ω—ã" }
};

// –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
function loadSettings() {
    return JSON.parse(localStorage.getItem("nova_automod") || "{}");
}

// —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
function saveSettings(data) {
    localStorage.setItem("nova_automod", JSON.stringify(data));
}

let settings = loadSettings();

// —É—Å—Ç–∞–Ω–æ–≤–∫–∞ initial –∑–Ω–∞—á–µ–Ω–∏–π
document.getElementById("automod-toggle").checked =
    settings.automod_enabled ?? true;

document.getElementById("banned-words").value =
    settings.banned_words?.join(", ") ?? "—Å–ª–æ–≤–æ1, —Å–ª–æ–≤–æ2";

// –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –ø—Ä–∞–≤–∏–ª
let container = document.getElementById("rules-list");
container.innerHTML = "";

for (let rid in RULES) {
    const enabled = settings.rules?.[rid] ?? true;

    let item = document.createElement("div");
    item.className = "rule-item" + (enabled ? " active" : "");

    item.innerHTML = `
        <div class="rule-header">
            <div class="rule-left">
                <div class="checkbox-wrapper">
                    <input type="checkbox" data-rule="${rid}" ${enabled ? "checked" : ""}>
                </div>
                <div class="rule-icon">${RULES[rid].icon}</div>
                <div><b>${rid}</b> ‚Äî ${RULES[rid].name}</div>
            </div>
            <div class="rule-toggle-arrow">‚ñ∂</div>
        </div>

        <div class="rule-body">
            –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–∞–≤–∏–ª–µ ${rid} –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–∑–∂–µ.
        </div>
    `;

    item.querySelector(".rule-header").addEventListener("click", (e) => {
    // –µ—Å–ª–∏ –∫–ª–∏–∫ –ø–æ —á–µ–∫–±–æ–∫—Å—É ‚Äî –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å
    if (e.target.tagName === "INPUT") return;

    item.classList.toggle("expanded");
});


    item.querySelector("input").addEventListener("change", saveAll);

    container.appendChild(item);
}

document.getElementById("automod-toggle").addEventListener("change", saveAll);
document.getElementById("banned-words").addEventListener("input", saveAll);

// —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function saveAll() {
    let rulesState = {};
    document.querySelectorAll("[data-rule]").forEach(el => {
        rulesState[el.dataset.rule] = el.checked;
    });

    settings = {
        automod_enabled: document.getElementById("automod-toggle").checked,
        banned_words: document.getElementById("banned-words").value
            .split(",")
            .map(w => w.trim())
            .filter(Boolean),
        rules: rulesState
    };

    saveSettings(settings);
}

</script>

</body>
</html>
